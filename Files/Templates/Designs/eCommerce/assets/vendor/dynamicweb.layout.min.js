/*
* dynamicweb.layout.js
* Copyright (c) 2013 Dynamicweb
* http://www.opensource.org/licenses/mit-license.php
*/
function validateForm(){var e=document.forms["LoginForm"]["username"].value;if(e==null||e==""){alert("First name must be filled out");return false}if(e=true){alert("brugernavn")}}function comment_validate(){if(document.getElementById("Comment.Rating").selectedIndex<1){alert("Please rate the product.");document.getElementById("Comment.Rating").focus();return false}if(document.getElementById("Comment.Name").value.length<1){alert("Specify your name.");document.getElementById("Comment.Name").focus();return false}if(document.getElementById("Comment.Text").value.length<1){alert("Please write a comment.");document.getElementById("Comment.Text").focus();return false}document.getElementById("commentform").action="/Default.aspx?ID=<!--@Global:Page.ID-->";document.getElementById("Comment.Command").value="create";return true}function nextComments(){if(!$(".tabContentShown").next().hasClass("fiveCommentDivContainer")){return}$(".tabContentShown").next().addClass("nextCommentContainerTemp");$(".tabContentShown").addClass("tabContentHidden");$(".tabContentShown").removeClass("tabContentShown");$(".nextCommentContainerTemp").addClass("tabContentShown");$(".nextCommentContainerTemp").removeClass("tabContentHidden");$(".nextCommentContainerTemp").removeClass("nextCommentContainerTemp");if(!$(".tabContentShown").next().hasClass("fiveCommentDivContainer")){$("#nextCommentsButton").addClass("disabledLink")}$("#previousCommentsButton").removeClass("disabledLink")}function previous(){if(!$(".tabContentShown").prev().hasClass("fiveCommentDivContainer")){return}$(".tabContentShown").prev().addClass("previousCommentContainerTemp");$(".tabContentShown").addClass("tabContentHidden");$(".tabContentShown").removeClass("tabContentShown");$(".previousCommentContainerTemp").addClass("tabContentShown");$(".previousCommentContainerTemp").removeClass("tabContentHidden");$(".previousCommentContainerTemp").removeClass("previousCommentContainerTemp");if(!$(".tabContentShown").prev().hasClass("fiveCommentDivContainer")){$("#previousCommentsButton").addClass("disabledLink")}$("#nextCommentsButton").removeClass("disabledLink")}function changeDropdownPosition(e){var t,n;n=Layout.isMobile.any()?screen.width:window.outerWidth;t=e.offset().left+e.width();if(t>n){e.css({left:"auto",right:"-1px"})}return}function onValidateForm(e,t,n){var r=true;if(n){if(document.getElementById(e+"RMATypeID")!=null){var i=document.getElementById(e+"RMATypeID");if(i.selectedIndex==-1||i.selectedIndex>=0&&i.options[i.selectedIndex].value==""){alert("Please specify 'Request type'");r=false;i.focus()}}if(r&&t!=null&&t!=""&&!validateSerialNumbers(e,t)){alert("Select RMA's products");r=false}}if(r&&document.getElementById(e+"RMAComment")!=null&&document.getElementById(e+"RMAComment").value.length<1){alert("Please specify '"+(n?"Additional info":"Customer comment")+"'");document.getElementById(e+"RMAComment").focus();r=false}if(r&&document.getElementById(e+"HasSubmit")!=null){document.getElementById(e+"HasSubmit").value="1"}return r}function setRmaItem(e,t,n){if(t&&t!=""&&n&&n!=""){var r=document.getElementById(t);if(r&&r!=null){r.value="";r.disabled=!e}var r=document.getElementById(n);if(r&&r!=null){r.value="";r.style.display=!e?"none":""}}}function validateSerialNumbers(e,t){var n=true;var r=document.getElementById(t);if(r){n=false;var i=new Array;for(var s=0;s<r.childNodes.length;s++){var o=getCheckBoxes(r.childNodes[s]);if(o&&o.length>0){for(var u=0;u<o.length;u++){i.push(o[u])}}}if(i&&i.length>0){var a=e+"OrderLineID";for(var s=0;s<i.length;s++){if(i[s].id.indexOf(a)>=0&&i[s].checked){n=true;break}}}}return n}function getCheckBoxes(e){var t=new Array;if(e){var n=null,r=null;for(var i=0;i<e.childNodes.length;i++){n=e.childNodes[i];if(n&&typeof n.type!="undefined"&&n.type=="checkbox")t.push(n);var s=getCheckBoxes(n);if(s&&s.length>0){for(var o=0;o<s.length;o++){t.push(s[o])}}}}return t}function copy_address(){if($("#deliveryToggle_yes").is(":checked")){$("#EcomOrderDeliveryCompany").val($("#EcomOrderCustomerCompany").val());$("#EcomOrderDeliveryName").val($("#EcomOrderCustomerName").val());$("#EcomOrderDeliveryAddress").val($("#EcomOrderCustomerAddress").val());$("#EcomOrderDeliveryZip").val($("#EcomOrderCustomerZip").val());$("#EcomOrderDeliveryCity").val($("#EcomOrderCustomerCity").val());var e=$("#EcomOrderCustomerCountry option:selected").index();$("#EcomOrderDeliveryCountry option:eq("+e+")").attr("selected","selected")}}function is_cook_exists(){var e="pricevat=";var t=document.cookie.split(";");for(var n=0;n<t.length;n++){var r=t[n];while(r.charAt(0)==" ")r=r.substring(1,r.length);if(r.indexOf(e)==0){if(r.substring(e.length,r.length)==1){return 1}else if(r.substring(e.length,r.length)==0){return 0}}}return 2}if(typeof Layout=="undefined"){var Layout=new Object}Layout.params={productListItem:".product-list-item-wrapper",productDetails:".product-details-content",productRatingUnderlayClass:"product-rating-underlay",productRatingStarClass:"product-rating-stars",BOMSelect:"BomConfigurator"};Layout.Translate={};Layout.ProfileForm={initialize:function(){$("#profile-form form").submit(function(e){var t=Layout.ProfileForm.validate();if(!t){e.preventDefault()}});$("#profile-form form input").keydown(function(){$(this).removeClass("form-field-required")});$("#profile-form-errors ul li").each(function(){$("#"+$(this).attr("data-form-field")).addClass("form-field-required")})},validate:function(){var e=null;var t=true;var n={};var r=["name","username","password","password2","email"];var i=function(e){var t=null;if(n[e]){t=n[e]}else{t=$("#profile-form-"+r[s]+" input");n[e]=t}return t};for(var s=0;s<r.length;s++){e=i(r[s]);if(!e.val()||!e.val().length){e.addClass("form-field-required");t=false}}return t}};Layout.LoginBox={containerSelector:".login-form",initialize:function(){var e=["quicklinks-login","quicklinks-myaccount","checkout-already-member","quicklinks-login2"],t;Layout.LoginBox.containerSelector=".modal-type-loginbox";t=$(Layout.LoginBox.containerSelector).find("form");$(Layout.LoginBox.containerSelector).on("show",function(){Layout.LoginBox.reset(null,t);Layout.LoginBox.focus(true,t)});for(var n=0;n<e.length;n++){$("#"+e[n]).click(function(e){e.preventDefault();Layout.LoginBox.show()})}$("input.login-credentials").keydown(function(){$(this).removeClass("form-field-required")})},show:function(){},hide:function(){},validate:function(e){var t=null;var n=true;var r=null;var i=["login-username-field","login-password-field"];e=$(e);Layout.LoginBox.resetValidationResults(null,e);if(Layout.LoginBox.mode(null,e)=="lostpassword"){i=["login-email-field"]}for(var s=0;s<i.length;s++){t=e.find("."+i[s]);if(!t.val()||!t.val().length){n=false;t.addClass("form-field-required");if(!r){r=t[0]}}}if(!n&&r){try{r.focus()}catch(o){}}return n},focus:function(e,t){var n=$(t).find("."+(Layout.LoginBox.mode(null,t)=="login"?"login-username-field":"login-email-field"));if(n&&n.length){try{n.focus()}catch(r){}if(!!e){try{n.select()}catch(r){}}}},reset:function(e,t){var n=null;var r=["login-username-field","login-password-field","login-email-field"];t=$(t);if(typeof e!="undefined"&&e&&e.length){e=e.toString().toLowerCase();if(e=="login"){r=["login-username-field","login-password-field"]}else if(e=="lostpassword"){r=["login-email-field"]}}else{Layout.LoginBox.mode("login",t)}Layout.LoginBox.resetValidationResults(e,t);for(var i=0;i<r.length;i++){n=t.find("."+r[i]);n.val("")}},resetValidationResults:function(e,t){var n=null;var r=["login-username-field","login-password-field","login-email-field"];t=$(t);if(typeof e!="undefined"&&e&&e.length){e=e.toString().toLowerCase();if(e=="login"){r=["login-username-field","login-password-field"]}else if(e=="lostpassword"){r=["login-email-field"]}}for(var i=0;i<r.length;i++){n=t.find("."+r[i]);n.removeClass("form-field-required")}},mode:function(e,t){var n="";var r=t;var i=$(t).parents(Layout.LoginBox.containerSelector);if(typeof e=="undefined"||!e||!e.length){n=(i.find("div.login-box-mode:visible").attr("data-login-box-mode")||"").toLowerCase()}else{e=e.toString().toLowerCase();i.find("div.login-box-mode").each(function(){var t=$(this);if(t.attr("data-login-box-mode")==e){t.show();r=t.find("form")}else{t.hide()}});Layout.LoginBox.reset(e=="login"?"lostpassword":"login",t);setTimeout(function(){Layout.LoginBox.focus(true,r)},25);n=e}return n}};Layout=function(e){e.isMobile=function(){return{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}}}();return e}(Layout||{});Layout.Cart=function(e){e.UpdateProductQuantity=function(){return function(e){if(!e)return;var t="QuantityOrderLine"+e;var n=$("input#"+t);if(!n)return;var r=parseInt(n.val()),i;if(r<=0){i="CartCmd=delorderline&key="+e}else{i="CartCmd=updateorderlines&"+t+"="+r}location.href="/Default.aspx?"+i}}();e.AddToCart=function(){return function(e,t,n){var r=$(e),i=r.parents(n||".product-list-item-wrapper"),s=i.find(".product-link").attr("href")||location.href,o=parseInt(i.find("input[name=quantity]").val()),u=i.find(".variants-selector"),a=u.val(),f,l=[{name:"cartcmd",value:"add"}];if(u&&a==""){alert(Layout.Translate.ProductVariantIsEmpty);return}if(o<1){alert("Quantity can't be less then 1");return}if(typeof t==Array){$.extend(l,t)}var f=s+(s.indexOf("?")>0?"&":"?")+$.param(l)+"&"+i.find("select, textarea, input").serialize()+(typeof t==String?"&"+t:"");if(!$.cookie("donotdisturb")){$.cookie("addedtocart",1,{expires:10})}eCommerce.Overlay.show(document.body);location.href=f}}();return e}(Layout.Cart||{});Layout.Products=function(e){e.MicroformatReviewConvert=function(){function n(){$('*[itemprop="rating"]').each(function(e,n){var r=$(n),i=t(n,"average"),s=t(n,"best");if(i&&s){r.contents().wrapAll('<span class="hidden"/>');r.addClass(Layout.params.productRatingUnderlayClass).css("width",s+"em").append($('<span class="'+Layout.params.productRatingStarClass+'"/>').css("width",(100*i/s).toFixed(4)+"%").html('<div style="width: 100px;" class="full-stars-container"><i class="icon-star star-showing star1"></i><i class="icon-star star-showing star2"></i><i class="icon-star star-showing star3"></i><i class="icon-star star-showing star4"></i><i class="icon-star star-showing star5"></i></div>'))}})}var e=true,t=function(e,t){return $('*[itemprop="'+t+'"]',e).html()};$(".product-rating").append('<div style="width: 100px;" class="empty-stars-container"><i class="icon-star-empty star-showing star1"></i><i class="icon-star-empty star-showing star2"></i><i class="icon-star-empty star-showing star3"></i><i class="icon-star-empty star-showing star4"></i><i class="icon-star-empty star-showing star5"></i></div>');if(e){n()}return function(){n()}}();return e}(Layout.Products||{});$.extend({getUrlParams:function(){var e=[],t;var n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");if(window.location.href.indexOf("?")==-1)return[];for(var r=0;r<n.length;r++){t=n[r].split("=");e.push(t[0]);e[t[0]]=t[1]}return e},getUrlParam:function(e){return $.getUrlParams()[e]},viewall:function(){var e=$("#allProductCount").html();if($.getUrlParams()["PageSize"]){}else{if($.getUrlParams().length){location.href+="&PageSize="+e}else{location.href+="?PageSize="+e}}},addToCart:function(e,t,n){Layout.Cart.AddToCart(e,t,n)},addAllToCart:function(e,t){var n=$(e).find(t||".product-list-item-wrapper");var r=$('<form class="addAllHiddenForm" method="post" />');r.attr("action","/Default.aspx?ID=48");r.append($('<input name="cartcmd" value="addmulti" />'));n.each(function(e,t){var n=parseInt($(t).find("input[name=quantity]").val());var i=$(t).find("input[name=ProductID]").val();if(isNaN(n)||n<=0)return;var s=$('<input name="ProductID'+(e+1)+'"/>').attr("value",i);var o=$('<input name="quantity'+(e+1)+'"/>').attr("value",n);var u=$('<input name="ProductLoopCounter'+(e+1)+'"/>').attr("value",e+1);r.append(s);r.append(o);r.append(u)});r.appendTo("body");eCommerce.Overlay.show(document.body);$("form.addAllHiddenForm").submit();return false},updateProductsListCounter:function(e){var t,n,r,i;e=e||{};if($(e.productList).length>0){t=$(e.productList).find(e.productListItem).length}else if($(e.productTilesList).length>0){t=$(e.productTilesList).find(e.productTilesListItem).length}if(t&&$(e.itemsDisplayed).length>0){n=$(".product-list-paging-current").length?$(".product-list-paging-current > a").html()-1:0;r=e.productsPerPage;i=n*r;$(e.itemsDisplayed).html(i+1+"-"+(i+t))}return},browserFeatures:{placeholder:false,checkSupport:function(){test=document.createElement("input");if("placeholder"in test)$.support.placeholder=true}},equalHeight:function(e){var t=$(e).map(function(){return $(this).height()}).get(),n=Math.max.apply(null,t);$(e).height(n);return n}});$(document).ready(function(){$(".mainmenu-bottom-totop a").live("click",function(){$("body,html").animate({scrollTop:0},800);return false});$("#amount").live("keyup",function(){$("#addtocart").attr("href","/default.aspx?id=<!--@Ecom:Product:Page.ID-->&productid=<!--@Ecom:Product.ID-->&quantity="+$(this).val()+"&cartcmd=add")});$(".buymore").live("click",function(){var e=$(this).parents(".product-pricebox-wrapper");if(e.hasClass("product-pricebox-wrapper-incart")){e.removeClass("product-pricebox-wrapper-incart");e.find(".product-pricebox-title, .product-variants").removeClass("hidden")}});$("a.addtocart").live("click",function(){var e=$(this).parents(".product-pricebox-wrapper").find(".variants-selector");if(e.length&&e.val()==""){alert("<!--@Translate(needtochoosevariant, 'Select product variant please')-->");return false}else{}})});$(document).ready(function(){$("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown .minicart-popup, .dropdown .dropdown-menu",function(e){e.stopPropagation()});$(".mainmenu a[data-toggle=dropdown]").on("touchstart click",function(e){var t=$(this).parent();if(t.hasClass("open")){location.href=$(this).attr("href")}else{changeDropdownPosition(t.find(".dropdown-menu"))}});$(".mainmenu a[data-toggle=dropdown]").on("hover",function(e){var t=$(this).parent();if(e.type=="mouseenter"){if(!t.hasClass("open")){t.addClass("open");changeDropdownPosition(t.find(".dropdown-menu"))}}if(e.type=="mouseleave"){if(t.hasClass("open")){t.removeClass("open")}}});$("body").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var t=$(this),n=t.attr("href"),r=$(t.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),i=typeof n!="undefined"&&!/#/.test(n)&&n!="javascript:void(0);";r.data("isRemote",i)});$("body").on("show",".modal",function(e){var t=$(this).data(),n=$(this).find(".modal-body");if(t.isRemote){n.html('<div class="loader" />')}});$("body").on("loaded",".modal.modal-type-variants",function(e){var t=$(this).find("#content-main .product-list-item-wrapper"),n=$(this).data(),r=$(this).find(".modal-body");if(n.isRemote){r.html(t.html())}});$('[data-dw-toggle="modal-bom-details"]').on("click",function(e){var t=$(this),n=$(t.attr("data-target")),r=t.data(),i="#"+Layout.params.BOMSelect+r.dwBomConfigurator,s=$(i).val(),o=t.attr("href")+"?ProductID="+s;if(s!=""){n.data("isRemote",true);n.modal({remote:o})}return false});$("select[id^="+Layout.params.BOMSelect+"]").on("change",function(e,t){var n=$(this),r=n.find("option:selected"),i=n.parents(".product-pricebox"),s=n.data(),o=r.data(),u=o.actualPrice.match(/[0-9.,]+/g)[0];if(u.indexOf(",")===1){u=u.replace(/,/g,"")}if(/data-/.test(s.dwBomPriceholder)){var a=s.dwBomPriceholder.replace(/data-/,"");n.data(a,u)}if(!t||t&&!t.init){i.trigger("priceChanged")}});$(".product-pricebox").on("priceChanged",function(e){var t=$(this),n=t.find("[data-dw-bom-priceholder]"),r=0;n.each(function(e){var t=n,n=$(this),i=n.data(),s=0;switch(i.dwBomPriceholder){case"text":s=n.text().match(/[0-9.,]+/g)[0];if(s.indexOf(",")===1){s=s.replace(/,/g,"")}break;case"value":break;default:if(/data-/.test(i.dwBomPriceholder)){var o=i.dwBomPriceholder.replace(/data-/,"");s=i[o]}}r+=parseFloat(s)});$(Layout.params.productDetails).find(".product-price-total").html(Layout.params.currency.symbol+r.formatMoney(2,".",","))});$(".product-pricebox select").trigger("change",{init:true});$("#LoginBox").on("shown",function(e){$(this).find("input[name=username]").focus()});$("#LoginBox").on("hidden",function(e){$(this).find(".loginbox-login-failed").hide()});if($("#LoginBox").data().loginFailed){var e=$("#LoginBox").find(".loginbox-login-failed");$("#LoginBox").modal("show");e.show()}Layout.LoginBox.initialize();Layout.ProfileForm.initialize();$.browserFeatures.checkSupport();$.equalHeight(".filter-wrapper h3");if(!$.support.placeholder){var t=document.activeElement;$(":text").focus(function(){if($(this).attr("placeholder")&&$(this).attr("placeholder")!=""&&$(this).val()==$(this).attr("placeholder")){$(this).val("").removeClass("hasPlaceholder")}}).blur(function(){if($(this).attr("placeholder")&&$(this).attr("placeholder")!=""&&($(this).val()==""||$(this).val()==$(this).attr("placeholder"))){$(this).val($(this).attr("placeholder")).addClass("hasPlaceholder")}});$(":text").blur();$(t).focus();$("form").submit(function(){$(this).find(".hasPlaceholder").each(function(){$(this).val("")})})}$(".addedtocart-links .buymore").live("click",function(){$(this).parents(".addedtocart").fadeOut("fast")});$(".product-incart-overlay .buymore").live("click",function(){$(this).parents(".product-incart-overlay").fadeOut("fast")});$.updateProductsListCounter({productList:".productlist-wrapper[data-productlist-mode='list']",productListItem:".product-list-item-wrapper",productTilesList:"",productTilesListItem:"",itemsDisplayed:"#ProductsDisplayCount",productsPerPage:parseInt($("#productsPageSize").html())});if($.getUrlParam("View")&&$(".nav-with-ecom-groups").length){var n=$(".nav-with-ecom-groups"),r=$.getUrlParam("View");n.find("a").each(function(){var e=$(this).attr("href");var t=e.indexOf("?")==-1?"?":"&";$(this).attr("href",e+t+"View="+r)})}var i=$("body").data("product-page");var s=$("body").data("product-paragraph");var o=[];eCommerce.Overlay.text("One moment please...");eCommerce.Filters.pageId(i);eCommerce.Filters.selectProductsText("Please choose between two and three products for comparison.");Dynamicweb.Frontend.InstantSearch.setup({pageID:i,paragraphID:s,url:"/Admin/Public/eCom/InstantSearch.ashx",delay:350});if($("#q").length){$("#q").focus();Dynamicweb.Frontend.InstantSearch.setEnableInstantSearch("q",true,{contentID:"product-instant-search",progressID:"search-box-preloader-top",onItemDataBound:function(e,t){var n=$("#"+this.contentID).find(".dw-search-result-prodid:contains('"+t.data.ID.toString()+"')").length<=0;t.template.set_isVisible(n);var r="/Default.aspx?ID="+i+"&ProductID="+t.data.ID;t.template.field("prodid",t.data.ID);t.template.field("url",r);t.template.field("productlink",r);t.template.field("detailslink",r);t.template.field("img","/Admin/Public/GetImage.ashx?Image=/Files/Images/Ecom/Products/"+t.data.Number+".jpg&Width=64&Height=64");t.template.field("name",t.data.Name);t.template.field("number",t.data.Number);t.template.field("price",t.data.PriceWithVAT.toFixed(2))},onBeforeQuery:function(e,t){t.set_cancel(t.get_value().length<2)},onComplete:function(){var e=$("#"+this.contentID);if(!e.is(":visible")){if($("#q").val().length>=2){e.fadeIn()}}}})}if(false)if($("#q").length){$("#q").focus();Dynamicweb.Frontend.InstantSearch.setEnableInstantSearch("q",true,{contentID:"product-instant-search",progressID:"search-box-preloader-top",onItemDataBound:function(e,t){var n=$("#"+this.contentID).find(".dw-search-result-prodid:contains('"+t.data.ID.toString()+"')").length<=0;t.template.set_isVisible(n);var r="/Default.aspx?ID="+i+"&ProductID="+t.data.ID;t.template.field("prodid",t.data.ID);t.template.field("url",r);t.template.field("productlink",r);t.template.field("detailslink",r);t.template.field("img","/Admin/Public/GetImage.ashx?Image=/Files/Images/Ecom/Products/"+t.data.Number+".jpg&Width=64&Height=64");t.template.field("name",t.data.Name);t.template.field("number",t.data.Number);t.template.field("price",t.data.PriceWithVAT.toFixed(2))},onBeforeQuery:function(e,t){t.set_cancel(t.get_value().length<2)}})}if($("#quickaddinput").length){$("#quickaddinput").parents("form").find("input[name='cartcmd']").prop("disabled",true);Dynamicweb.Frontend.InstantSearch.setEnableInstantSearch("quickaddinput",true,{contentID:"product-quickadd-instant-search",progressID:"search-box-preloader-quickadd",onItemDataBound:function(e,t){var n=$("#"+this.contentID).find(".dw-search-result-prodid:contains('"+t.data.ID.toString()+"')").length<=0;t.template.set_isVisible(n);var r="/Default.aspx?ID="+i+"&ProductID="+t.data.ID;t.template.field("prodid",t.data.ID);t.template.field("url",r);t.template.field("productlink",r);t.template.field("name",t.data.Name);t.template.field("number",t.data.Number)},onComplete:function(){var e=$("#product-quickadd-instant-search");var t=$("#quickaddinput");if(!e.is(":visible")){e.css({left:t.position().left+8}).fadeIn()}}});$("#product-quickadd-instant-search .dw-search-result-item a").live("click",function(e){e.preventDefault();var t=$(this).parents(".dw-search-result").find(".dw-search-result-number").html();$("#quickaddinput").val(t)})}instantSearchMouseOver=false;$(".product-suggestions-box").live("hover",function(){instantSearchMouseOver=true},function(){instantSearchMouseOver=false});$(document).mouseup(function(){if(!instantSearchMouseOver)$(".product-suggestions-box").fadeOut()});$(".quick-add form").live("submit",function(){$(this).find("input[name='cartcmd']").prop("disabled",false);$("input[name='eComQuery']").attr("name","ProductNumber");return true});var u={top:{x:{key:"left",value:-60},y:{key:"bottom",value:15}},bottom:{x:{key:"left",value:-55},y:{key:"top",value:15}},left:{x:{key:"left",value:-200},y:{key:"top",value:-20}},right:{x:{key:"right",value:-200},y:{key:"top",value:-20}}};$("a[data-rel=tooltip]").live("mouseover",function(e){var t=e.pageX-this.offsetLeft,n=e.pageY-this.offsetTop,r=$(this).data("container"),i=$(this).data("position"),s;if(r){s=$(r).html()}else{s=$(this).attr("title");$(this).attr("title","")}$(this).append('<div id="tooltip">'+s+"</div>");if(i in u){$("#tooltip").css(u[i].y.key,u[i].y.value);$("#tooltip").css(u[i].x.key,u[i].x.value)}else{$("#tooltip").css("top",e.pageY-$(this).offset().top+10);$("#tooltip").css("left",e.pageX-$(this).offset().left+10)}$("#tooltip").fadeIn("500");$("#tooltip").fadeTo("10",1)}).live("mousemove",function(e){var t=$(this).data();if(!u.hasOwnProperty(t.position)){$("#tooltip").css("top",e.pageY-$(this).offset().top+10);$("#tooltip").css("left",e.pageX-$(this).offset().left+10)}}).live("mouseout",function(){var e=$(this).data();if(!e.container){$(this).attr("title",$(".tipBody").html())}$(this).children("div#tooltip").remove()});$(".check_voucher").click(function(){var e=$("#EcomOrderVoucherCode").val();var t=$(this);$.ajax({url:"/Admin/Module/eCom_Catalog/dw7/Vouchers/VouchersActions.ashx?cmd=CheckVoucher&code="+e,success:function(e){if(e=="true"){alert(t.data("ok"));$(".check_voucher").hide().next().show()}else{alert(t.data("error"))}}});return false});$(".product-list-item-wrapper.version-b2b input[name='quantity']").live("keypress",function(e){var t=e.keyCode?e.keyCode:e.which,n;if(t==9){n=$(this).parents(".product-list-item");n.next().find("input[name='quantity']").focus()}});$(".vat_check").click(function(){if($(this).find("input").attr("checked")=="checked"){$("body").addClass("wr_vat");document.cookie="pricevat"+"="+"1"+"; path=/"}else{$("body").removeClass("wr_vat");document.cookie="pricevat"+"=0"+"; expires=-1"+"; path=/"}});if(is_cook_exists()==1){$(".vat_check input").attr("checked","checked");$("body").addClass("wr_vat")}else if(is_cook_exists()==2){}else if(is_cook_exists()==0){$("body").removeClass("wr_vat")}$(".product-details .products-related .product-list-related:lt(3)").each(function(){$(this).show()});$(".print_win").click(function(){$(this).parents(".modal").find(".modal-body").printElement({overrideElementCSS:[designBaseUrl+"/assets/stylesheets/bootstrap.css",designBaseUrl+"/assets/stylesheets/bootstrap-responsive.css",designBaseUrl+"/assets/stylesheets/layout.css"],leaveOpen:true,printBodyOptions:{styleToAdd:"width:auto; height:auto"}})});$(".feature-wrapper").on("click",function(){location.href=$(this).find("a:first-child").attr("href");return false});$(".product-tile ul img").hover(function(){var e=$(this).data("path");$(this).parents(".thumbnail").find("img:eq(0)").attr("src",e)},function(){$(this).parents(".thumbnail").find("img:eq(0)").attr("src",$(this).parents(".thumbnail").find("img:eq(0)").data("src"))});$(".added-to-cart a").live("click",function(){if($(".dont").is(":checked")){$.cookie("donotdisturb",1,{expires:10})}});$("#addedModal").on("hidden",function(){if($(".dont").is(":checked")){$.cookie("donotdisturb",1,{expires:10})}})});Number.prototype.formatMoney=function(e,t,n){var r=this,e=isNaN(e=Math.abs(e))?2:e,t=t==undefined?",":t,n=n==undefined?".":n,i=r<0?"-":"",s=parseInt(r=Math.abs(+r||0).toFixed(e))+"",o=(o=s.length)>3?o%3:0;return i+(o?s.substr(0,o)+n:"")+s.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?t+Math.abs(r-s).toFixed(e).slice(2):"")}