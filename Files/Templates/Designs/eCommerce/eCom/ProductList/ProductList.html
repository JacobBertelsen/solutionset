<div class="rounded-box products">
    <div class="rallback_t_h3">

        <!-- Validation hack -->
        <form name="validationHackForm01" id="validationHackForm01">
            <input type="submit" style="display:none;">

            <span><!--@Translate(SortBy, "Sort by:")--></span>
            <label for="lstOrderBy">&nbsp;</label>
            <select id="lstOrderBy" name="lstOrderBy">
                <option value="Rating,DESC"><!--@Translate(Rating, "Rating")--></option>
                <option value="Name,ASC"><!--@Translate(Name, "Name")--></option>
                <option value="Number,ASC"><!--@Translate(Number, "Number")--></option>
                <option value="Price,ASC"><!--@Translate(PriceAscending, "Price, lowest first")--></option>
                <option value="Price,DESC"><!--@Translate(PriceDescending, "Price, highest first")--></option>
                <option value="MostSold,DESC"><!--@Translate(MostSold, "Most sold")--></option>
            </select>

            <span class="list-mode">
                <a href="javascript:void(0);" data-list-mode="List" title='<!--@Translate(List, "List")-->' class="list-mode-list"></a>
                <a href="javascript:void(0);" data-list-mode="Tiles" title='<!--@Translate(Tiles, "Tiles")-->' class="list-mode-tiles"></a>
            </span>

            <label for="lstPageSize">&nbsp;</label>
            <select id="lstPageSize" name="lstPageSize">
                <option value="10"><!--@Translate(PageSize10, "10")--></option>
                <option value="25"><!--@Translate(PageSize25, "25")--></option>
                <option value="50"><!--@Translate(PageSize50, "50")--></option>
                <option value="100"><!--@Translate(PageSize100, "100")--></option>
            </select>

            <span id="lstPageSizeLabel">
                <!--@Translate(ProductsPerPage, "Products per page:")-->
            </span>
        </form>

        <span class="clearfix"></span>
    </div>
    
    <div class="rounded-box-content">
        <table class="product-list">
            <caption style="display:none;">Product list table</caption>
            <!--@LoopStart(Products)-->
            <tr class="product-list-item">
                <td>
                    <div class="product-list-item-wrapper">
                        <div class="grid_9 alpha omega">
                            <div class="grid_2 alpha">
                                <!--@If Defined(Ecom:Product.ImageSmall.Default.Clean)-->
                                <a class="product-image" href="<!--@Ecom:Product.LinkGroup.Clean-->" title="<!--@Ecom:Product.Name-->">
                                    <img src="/Admin/Public/getimage.ashx?Image=<!--@Ecom:Product.ImageSmall.Default.Clean-->&amp;Width=120" alt="" />
                                </a>
                                <!--@EndIf(Ecom:Product.ImageSmall.Default.Clean)-->
                            </div>

                            <div class="grid_4 omega">
                                <a href="<!--@Ecom:Product.LinkGroup.Clean-->" class="product-link" title="<!--@Ecom:Product.Name-->"><!--@Ecom:Product.Name--></a>
                                <div class="clearfix"></div>
                                <div class="product-description"><!--@Ecom:Product.ShortDescription--></div>
                            </div>
                            <div class="grid_2 omega push_1">
                                <div class="product-price">
                                    <!--@Ecom:Product.Price.PriceWithVATFormatted-->
                                    <div class="product-feeinfo">
                                        <a href="#" rel="tooltip" data-container=".paymentshippingfee" data-position="bottom"><!--@Translate(expaymentshippingfee, 'Ex. shipping and payment fees')--></a>
                                    </div>
                                </div>
                                <div class="product-rating-comments">
                                    <div class="product-rating"><!--@Ecom:Product.RatingStars--></div>
                                    <div class="product-comments">(<a href="<!--@Ecom:Product.LinkGroup.Clean-->&show=reviews"><!--@Ecom:Product.CommentCount--></a>)</div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="product-facts">
                                    <ul>
                                        <li style="background-image: url('<!--@Ecom:Product:Stock.Image.Clean-->');"><!--@Ecom:Product:Stock.Text--></li>
                                        <li><!--@Translate(ProductDelivary, "Delivery")--> <!--@Ecom:Product.IsInCart)--> <!--@Ecom:Product:Stock.DeliveryText--> <!--@Ecom:Product:Stock.DeliveryUnit--></li>
                                    </ul>
                                </div>
                                <div class="product-addtocart">
                                    <button class="button button-green" <!--@If(Ecom:Product.VariantCount>0)-->onclick="showVariantChooserPopup(this, $.addToCart)"<!--@EndIf--><!--@If(Ecom:Product.VariantCount==0)-->onclick="$.addToCart(this)"<!--@EndIf-->>
                                        <span><!--@Translate(AddToCart, "Add to cart")--></span>
                                    </button>
                                </div>
                            </div>
                            <!--@If(Ecom:Product.IsInCart=="True")--><!--@EndIf-->
                            <!--@If Defined(Ecom:Product.IsInCart)-->
                                <!--@Include(/eCommerce01B2C_AddedToCart.html)-->
                            <!--@EndIf(Ecom:Product.IsInCart)-->
                        </div>
                        <div class="clearfix"></div>
                        <div class="grid_7 alpha omega product-actions">
                            <div class="grid_2 alpha">
                                <div class="product-compare">
                                    <input type="checkbox" name="Compare" class="product-compare-selection" value="<!--@Ecom:Product.ID-->$<!--@Ecom:Product.LanguageID-->$<!--@Ecom:Product.VariantID-->" title="<!--@Translate(CompareProduct, "Compare")-->" />
                                    <button class="product-compare-activator button button-gray button-small"><!--@Translate(CompareProduct, "Compare")--></button>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div class="grid_5 omega">
                                <div class="product-number"><!--@Translate(ProductNumber, "Product no.")-->:&nbsp;<!--@Ecom:Product.Number--></div>
                                <a class="product-readmore" href="<!--@Ecom:Product.LinkGroup.Clean-->" title="<!--@Ecom:Product.Name-->"><span><!--@Translate(ReadMore, "Read more")--></span></a>
                                <div class="clear"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <!-- [start] Popup block for variant chooser -->
                    <!--@If(Ecom:Product.VariantCount>0)-->
                    <div class="popup-variants product-details">
                        <div class="popup-variants-partleft">
                            <!--@If Defined(Ecom:Product.ImageSmall.Default.Clean)-->
                            <img src="/Admin/Public/getimage.ashx?Image=<!--@Ecom:Product.ImageSmall.Default.Clean-->&amp;Width=350" alt="" />
                            <!--@EndIf(Ecom:Product.ImageSmall.Default.Clean)-->
                            <div class="popup-allinfolink">
                                <a href="<!--@Ecom:Product.LinkGroup.Clean-->"><!--@Translate(allproductinfo, "All product informations - Click here")--></a>
                            </div>
                        </div>
                        <div class="popup-variants-partright">
                            <div class="product-pricearea">
                                <div class="product-rating-comments">
                                    <div class="product-rating"><!--@Ecom:Product.RatingStars--></div>
                                    <div class="product-pricelabel"><!--@Translate(ProductNumber, "Product no.")-->: <!--@Ecom:Product.Number--></div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="product-description"><!--@Ecom:Product.ShortDescription--></div>
                                <div class="product-pricebox-wrapper">
                                    <div class="product-pricebox-title"><!--@Translate(Choose_variant, "Choose your variant")-->:</div>  
                                    <div class="product-variants">
                                        <select id="variants" class="variants-selector">
                                            <option value=""><!--@Translate(selectyourvariant, 'Select your option')--></option>
                                            <!--@LoopStart(VariantCombinations)-->
                                            <option id="vOpt<!--@Ecom:VariantCombination.VariantID-->" value="<!--@Ecom:VariantCombination.VariantID-->">
                                                <!--@Ecom:VariantCombination.VariantText-->
                                            </option>
                                            <!--@LoopEnd(VariantCombinations)-->
                                        </select>
                                    </div>
                                    <div id="secretDiv">
                                        <!--@LoopStart(BOMConfigurators)-->
                                        <!--@LoopStart(ConfiguratorProducts)-->
                                        <input type="hidden" id="<!--@Ecom:Product.ID-->" value="<!--@Ecom:Product.ActualPrice-->" />
                                        <!--@LoopEnd(ConfiguratorProducts)-->
                                        <!--@LoopEnd(BOMConfigurators)-->
                                    </div>
                                    <div class="product-pricebox">
                                        <div>
                                            <div>&nbsp;</div>
                                            <div><!--@Ecom:Product.Price.PriceWithVATFormatted--> / <!--@Translate(unit, "unit")--></div>
                                        </div>    
                                    </div>
                                    <div class="product-pricebox-actions">
                                        <input type="text" name="quantity" id="amount" onclick="this.value='';" value="1"> <i><!--@Translate(unit, "unit")--></i>
                                        <a href="#" class="button button-green button-small addtocart"><i><!--@Translate(AddToCart, "Add to cart")--></i></a>
                                    </div>
                                </div>
                                <div class="product-delivery">
                                    <span style="background-image: url('<!--@Ecom:Product:Stock.Image.Clean-->');">
                                        <!--@Ecom:Product:Stock.Text-->
                                    </span>
                                    <span style="background-image: url('<!--@Ecom:Product:Stock.Image.Clean-->');">
                                        <!--@Translate(Delivery_in, "Delivery in")--> 
                                        <!--@Ecom:Product:Stock.DeliveryText--> 
                                        <!--@Ecom:Product:Stock.DeliveryUnit-->
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--@EndIf-->
                    <!-- [end] Popup block for variant chooser -->
                </td>
            </tr>
            <!--@LoopEnd(Products)-->
        </table>
    </div>
</div>

<div class="paymentshippingfee"><!--@If(Global:Area.LongLang=='en-US')--><!--@Global:Paragraph.Content(1449)--><!--@EndIf--><!--@If(Global:Area.LongLang=='da-DK')--><!--@Global:Paragraph.Content(1450)--><!--@EndIf--></div>

<link href="/Files/Templates/Designs/eCommerce01/js/lib/fancybox/jquery.fancybox-ecommenrce01-regular.css" rel="stylesheet" type="text/css" />
<script type="text/JavaScript" src="/Files/Templates/Designs/eCommerce01/js/lib/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/JavaScript" src="/Files/Templates/Designs/eCommerce01/js/jquery.productsAutoLoad.js"></script>
<script type="text/javascript">

    $(document).ready(function () {
        var requestPageID = 494;
        $(".product-list").productsAutoLoad({
            productsContainer: "table.product-list",
            pagingSelector: ".product-list-paging",
            requestPath: "/Default.aspx?ID=" + requestPageID + "&groupid=<!--@Ecom:ProductList:Page.GroupID-->",
            onProductsLoaded: function () {
                $.updateProductsListCounter();
            }
        });
    });

    function showVariantChooserPopup(obj, callback) {
        var jObj = $(obj);
        var product = jObj.parents(".product-list-item");
        var popup = product.find(".popup-variants"),
            productName = product.find(".product-link").html();

        $.fancybox(
            popup.clone(true).css("display", "block"),
            {
                title: productName,
                afterLoad: function () {
                    var box = this.content;
                    this.content.find(".addtocart").live("click", function () {
                        var extentedQuery = "";

                        /* Add variants parameters */
                        var productVariant = box.find(".variants-selector").val();
                        if (productVariant) {
                            extentedQuery += "variantid=" + productVariant;
                        } else {
                            alert("<!--@Translate(needtochoosevariant, 'Select product variant please')-->");
                            return;
                        }

                        /* Add BOM parameters*/
                        var bomSerialized = box.find(".product-pricebox select").serialize();
                        var bomSplitted = bomSerialized.split("&"), _index;
                        for (var i = 0; i < bomSplitted.length; i++) {
                            bomValue = bomSplitted[i].split("=");
                            if (!bomValue[0]) continue;
                            extentedQuery += (extentedQuery.length ? "&" : "") + bomValue[0] + "=" + bomValue[1];
                        }

                        /* Add quantity of ordered products */
                        var productQuantity = box.find("input[name=quantity]").val();
                        if (productQuantity && productQuantity > 1) extentedQuery += "&quantity=" + productQuantity;

                        /* Run callback and close popup */
                        callback(obj, extentedQuery);
                        $.fancybox.close();
                        return;
                    });
                },
                beforeClose: function () {
                    this.content.find(".addtocart").off("click");
                }
            }
        );
    }

</script>